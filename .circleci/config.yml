version: 2.1
orbs:
  cypress: cypress-io/cypress@3 # Cypress orb를 사용

jobs:
  test:
    docker:
      - image: cypress/included:10.0.0 # Cypress가 포함된 Docker 이미지
    steps:
      - checkout # 코드를 체크아웃합니다.
      - run:
          name: Install dependencies
          command: npm ci # 의존성 설치
      - run:
          name: Start application
          command: npm run start & # 백그라운드로 서버 시작
      - cypress/run:
          start: true # Cypress가 서버가 시작된 후 실행되도록 설정

workflows:
  version: 2
  build:
    jobs:
      - test # test job을 워크플로우에 추가
